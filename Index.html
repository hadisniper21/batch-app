<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HaDi Batch Generator (v8 - Brands)</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1e40af;
            --secondary-color: #0ea5e9;
            --accent-color: #f59e0b;
            --whatsapp-color: #25D366;
            --whatsapp-dark: #128C7E;
            --bg-gradient: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            --card-bg: #ffffff;
            --text-color: #1e293b;
            --border-radius: 16px;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg-gradient);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--text-color);
        }

        .container {
            max-width: 850px;
            width: 100%;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            padding: 40px;
            border-top: 6px solid var(--primary-color);
        }

        h1 {
            text-align: center;
            color: var(--primary-dark);
            font-weight: 800;
            font-size: 2.2rem;
            margin-top: 0;
            margin-bottom: 30px;
        }

        h1::after {
            content: '';
            display: block;
            width: 60px;
            height: 4px;
            background: var(--secondary-color);
            margin: 10px auto 0;
            border-radius: 2px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 700;
            color: #475569;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        select, input, textarea {
            padding: 14px;
            font-size: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            width: 100%;
            box-sizing: border-box; 
            font-family: 'Cairo', sans-serif;
            transition: all 0.3s ease;
            background-color: #f8fafc;
            color: #334155;
            outline: none;
        }

        select:focus, input:focus, textarea:focus {
            border-color: var(--secondary-color);
            background-color: #fff;
            box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.1);
        }

        input[disabled] {
            background-color: #f1f5f9;
            color: #64748b;
            font-weight: bold;
            text-align: center;
            cursor: not-allowed;
        }

        textarea { resize: vertical; min-height: 80px; }
        .full-width { grid-column: 1 / -1; }

        .btn-generate {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            border: none;
            padding: 16px;
            border-radius: 10px;
            margin-top: 20px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.2);
            font-family: 'Cairo', sans-serif;
        }

        .btn-generate:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.3);
        }

        /* Ø²Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .btn-whatsapp {
            background-color: var(--whatsapp-color);
            color: white;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            margin-top: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: background-color 0.3s ease;
            text-decoration: none;
            box-shadow: 0 4px 10px rgba(37, 211, 102, 0.4);
            animation: bounceIn 0.8s;
        }
        
        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.3); }
            50% { opacity: 1; transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }

        .btn-whatsapp:hover {
            background-color: var(--whatsapp-dark);
        }

        .result-area {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(to bottom right, #fffbeb, #fff7ed);
            border: 2px dashed var(--accent-color);
            border-radius: 12px;
            text-align: center;
            display: none; 
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .result-area h2 {
            margin: 15px 0 0 0;
            color: var(--primary-dark);
            font-size: 3rem;
            font-family: 'Courier New', Courier, monospace;
            font-weight: 900;
            direction: ltr;
            letter-spacing: 2px;
        }

        @media (max-width: 600px) {
            .form-grid { grid-template-columns: 1fr; }
            .container { padding: 25px; }
            h1 { font-size: 1.8rem; }
            .result-area h2 { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>HaDi Batch Generator <span style="font-size:0.5em; vertical-align: middle; color:#aaa;">(v8)</span></h1>
        
        <form id="batch-form">
            <div class="form-grid">
                
                <div class="form-group full-width" style="background: #f1f8ff; padding: 15px; border-radius: 10px; border: 1px solid #d0e3ff;">
                    <label for="brand-select" style="color:#004085;">1. Ø§Ø®ØªØ± Ø§Ø³Ù… Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ (Brand Name):</label>
                    <select id="brand-select" style="border-color: #004085;">
                        <option value="" disabled selected>-- Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ --</option>
                        <option value="Royal Hills">Royal Hills</option>
                        <option value="Aqua Premium">Aqua Premium</option>
                        <option value="Agwad">Agwad</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="category-select">2. ÙÙ„ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ:</label>
                    <select id="category-select">
                        <option value="all">-- Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ --</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="product-name-select">3. Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬:</label>
                    <select id="product-name-select">
                        <option value="" data-rawtype="" disabled selected>-- Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ Ø£ÙˆÙ„Ø§Ù‹ --</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="raw-type-input">4. Ø§Ù„Ø±Ù…Ø² (Raw Type):</label>
                    <input type="text" id="raw-type-input" disabled placeholder="(Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒ)">
                </div>

                <div class="form-group">
                    <label for="addition-select">5. Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª:</label>
                    <select id="addition-select">
                        <option value="">-- Ø¨Ø¯ÙˆÙ† Ø¥Ø¶Ø§ÙØ© --</option>
                        <option value="S">Ø´Ø·Ø© (S)</option>
                        <option value="T">Ø·Ø­ÙŠÙ†Ø© (T)</option>
                        <option value="K">ÙƒÙ…ÙˆÙ† (K)</option>
                        <option value="V">Ø²ÙŠØª Ø¯ÙˆØ§Ø± Ø§Ù„Ø´Ù…Ø³ (V)</option>
                        <option value="O">Ø²ÙŠØª Ø²ÙŠØªÙˆÙ† (O)</option>
                        <option value="X">ØµÙ„ØµØ© (X)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="weight-select">6. ÙˆØ²Ù† Ø§Ù„Ø¹Ø¨ÙˆØ©:</label>
                    <select id="weight-select">
                        <option value="" disabled selected>-- Ø§Ø®ØªØ± Ø§Ù„ÙˆØ²Ù† --</option>
                        <option value="3">400 Ø¬Ø±Ø§Ù…</option>
                        <option value="13">800 Ø¬Ø±Ø§Ù…</option>
                        <option value="2">2500 Ø¬Ø±Ø§Ù…</option>
                        <option value="1">3000 Ø¬Ø±Ø§Ù…</option>
                        <option value="15">425 Ø¬Ø±Ø§Ù…</option>
                        <option value="14">330 Ø¬Ø±Ø§Ù…</option>
                        <option value="4">360 Ø¬Ø±Ø§Ù…</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="client-name">7. Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
                    <input type="text" id="client-name" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„...">
                </div>

                <div class="form-group">
                    <label for="month-input">8. Ø´Ù‡Ø± / Ø³Ù†Ø©:</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="month-input" placeholder="Ø§Ù„Ø´Ù‡Ø± (11)" min="1" max="12">
                        <input type="number" id="year-input" placeholder="Ø§Ù„Ø³Ù†Ø© (25)" min="0" max="99">
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label for="notes-input">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:</label>
                    <textarea id="notes-input" placeholder="Ø³Ø¬Ù„ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ©..."></textarea>
                </div>

                <button type="button" class="full-width btn-generate" onclick="generateBatch()">Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„Ø©</button>
            </div>
        </form>
        
        <div id="result-area" class="result-area">
            <h3>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ù… Ø§Ù„ØªØ´ØºÙŠÙ„Ø©:</h3>
            <h2 id="batch-number"></h2>
            
            <button class="btn-whatsapp" onclick="sendToWhatsapp()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.472 14.382C17.119 14.205 15.396 13.36 15.073 13.243C14.75 13.126 14.514 13.067 14.279 13.42C14.043 13.773 13.367 14.566 13.161 14.802C12.956 15.037 12.75 15.066 12.397 14.89C12.044 14.713 10.908 14.341 9.561 13.141C8.49804 12.194 7.78004 11.025 7.57404 10.672C7.36804 10.319 7.55204 10.128 7.72904 9.95201C7.88704 9.79501 8.08004 9.54401 8.25604 9.29401C8.43304 9.04401 8.49104 8.86801 8.60904 8.63301C8.72604 8.39801 8.66704 8.19201 8.57904 8.01601C8.49104 7.84001 7.78004 6.08901 7.48604 5.38301C7.19904 4.69501 6.91104 4.78901 6.69104 4.78901C6.48504 4.78901 6.25004 4.78901 6.01504 4.78901C5.77904 4.78901 5.39704 4.87701 5.07404 5.23001C4.75004 5.58301 3.83904 6.43501 3.83904 8.16901C3.83904 9.90401 5.10304 11.58 5.28004 11.815C5.45604 12.05 7.77904 15.635 11.336 17.17C12.182 17.535 12.843 17.753 13.359 17.917C14.162 18.172 14.887 18.136 15.458 18.051C16.096 17.956 17.419 17.25 17.684 16.502C17.949 15.754 17.949 15.107 17.89 15.005C17.831 14.903 17.655 14.844 17.294 14.664" fill="currentColor"/>
                </svg>
                Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¬Ø±ÙˆØ¨ (ÙˆØ§ØªØ³Ø§Ø¨)
            </button>
        </div>
    </div>

    <script>
        const productDatabase = [
            { name: "ÙÙˆÙ„ Ù…Ø¯Ù…Ø³ Ø³Ø§Ø¯Ø©", rawType: "FM", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ù…Ø¯Ù…Ø³ Ø­Ø§Ø±", rawType: "FS", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ù…Ø¯Ù…Ø³ Ø¨Ø§Ù„Ø¨ØµÙ„ ÙˆØ§Ù„ØªØ³Ø¨ÙŠÙƒØ©", rawType: "FX", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø§Ù„Ø®Ù„Ø·Ø© Ø§Ù„Ù„Ø¨Ù†Ø§Ù†ÙŠ Ø¨Ø§Ù„Ø­Ù…Øµ", rawType: "FH", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø²ÙŠØª Ø§Ù„Ø²ÙŠØªÙˆÙ†", rawType: "FO", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø¹Ø¨Ø§Ø¯ Ø§Ù„Ø´Ù…Ø³", rawType: "FV", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø§Ù„ÙƒÙ…ÙˆÙ† ÙˆØ§Ù„Ù„ÙŠÙ…ÙˆÙ†", rawType: "FK", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø§Ù„Ø®Ù„Ø·Ø© Ø§Ù„Ù„ÙŠØ¨ÙŠØ©", rawType: "FL", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø§Ù„Ø®Ù„Ø·Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©", rawType: "FH", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø§Ù„Ø®Ù„Ø·Ø© Ø§Ù„Ù…ØµØ±ÙŠØ©", rawType: "FVS", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø§Ù„Ø·Ø­ÙŠÙ†Ø©", rawType: "FT", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø§Ù„Ø®Ù„Ø·Ø© Ø§Ù„ÙƒØ±Ø¯ÙŠØ©", rawType: "FKR", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø§Ù„Ø®Ù„Ø·Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©", rawType: "FX", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ø¨Ø§Ù„Ø®Ù„Ø·Ø© Ø§Ù„Ø´Ø§Ù…ÙŠØ©", rawType: "FH", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ù…Ø¯Ù…Ø³ Ù…Ù‚Ø´ÙˆØ±", rawType: "FPX", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ù…Ø¯Ù…Ø³ Ù…Ù‚Ø´ÙˆØ± Ø­Ø§Ø±", rawType: "FPS", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ù…Ø¯Ù…Ø³ Ø­Ø§Ø± Ø¨Ø§Ù„ØµÙ„ØµØ©", rawType: "FXS", category: "ÙÙˆÙ„" },
            { name: "ÙÙˆÙ„ Ù…Ø¯Ù…Ø³ Ø¨Ø§Ù„ØµÙ„ØµØ© ÙˆØ§Ù„ØªØ³Ø¨ÙŠÙƒØ©", rawType: "FX", category: "ÙÙˆÙ„" },
            { name: "Ø¨Ø§Ø²Ù„Ø§Ø¡ Ø®Ø¶Ø±Ø§Ø¡", rawType: "GP", category: "Ø¨Ø§Ø²Ù„Ø§Ø¡ ÙˆØ®Ø¶Ø±ÙˆØ§Øª" },
            { name: "Ø¨Ø§Ø²Ù„Ø§Ø¡ Ø®Ø¶Ø±Ø§Ø¡ Ø¨Ø§Ù„Ø¬Ø²Ø±", rawType: "GC", category: "Ø¨Ø§Ø²Ù„Ø§Ø¡ ÙˆØ®Ø¶Ø±ÙˆØ§Øª" },
            { name: "Ø®Ø¶Ø±ÙˆØ§Øª Ù…Ø´ÙƒÙ„Ø© Ø¨Ø§Ù„Ø¬Ø²Ø± ÙˆØ§Ù„Ø¨Ø·Ø§Ø·Ø³", rawType: "GCP", category: "Ø¨Ø§Ø²Ù„Ø§Ø¡ ÙˆØ®Ø¶Ø±ÙˆØ§Øª" },
            { name: "Ø®Ø¶Ø±ÙˆØ§Øª Ù…Ø´ÙƒÙ„Ø© Ø¨Ø§Ù„Ø¬Ø²Ø± ÙˆØ§Ù„Ø°Ø±Ø©", rawType: "GCC", category: "Ø¨Ø§Ø²Ù„Ø§Ø¡ ÙˆØ®Ø¶Ø±ÙˆØ§Øª" },
            { name: "ÙØ§ØµÙˆÙ„ÙŠØ§ Ø¨ÙŠØ¶Ø§Ø¡", rawType: "WS", category: "Ø¨Ù„Ø¯ÙŠ" },
            { name: "ÙØ§ØµÙˆÙ„ÙŠØ§ Ù…Ø·Ø¨ÙˆØ®Ø© Ø¨ØµÙˆØµ Ø§Ù„Ø·Ù…Ø§Ø·Ù…", rawType: "WT", category: "Ø¨Ù„Ø¯ÙŠ" },
            { name: "ÙØ§ØµÙˆÙ„ÙŠØ§ Ø¨ÙŠØ¶Ø§Ø¡", rawType: "NV", category: "Ù†ÙŠÙÙŠ" },
            { name: "ÙØ§ØµÙˆÙ„ÙŠØ§ Ù…Ø·Ø¨ÙˆØ®Ø© Ø¨ØµÙˆØµ Ø§Ù„Ø·Ù…Ø§Ø·Ù…", rawType: "NT", category: "Ù†ÙŠÙÙŠ" },
            { name: "Ø­Ù…Øµ", rawType: "HS", category: "Ø¨Ù‚ÙˆÙ„ÙŠØ§Øª" },
            { name: "Ù„ÙˆØ¨ÙŠØ§", rawType: "BEP", category: "Ø¨Ù‚ÙˆÙ„ÙŠØ§Øª" },
            { name: "ÙØ§ØµÙˆÙ„ÙŠØ§ Ø­Ù…Ø±Ø§Ø¡", rawType: "RK", category: "Ø¨Ù‚ÙˆÙ„ÙŠØ§Øª" },
            { name: "ÙØ§ØµÙˆÙ„ÙŠØ§ Ø®Ø¶Ø±Ø§Ø¡", rawType: "WG", category: "Ø¨Ù‚ÙˆÙ„ÙŠØ§Øª" },
            { name: "Ø°Ø±Ø© Ø³ÙƒØ±ÙŠØ©", rawType: "SC", category: "Ø£Ø®Ø±Ù‰" },
            { name: "Ø¨Ø§Ù…ÙŠØ© Ø®Ø¶Ø±Ø§Ø¡", rawType: "OK", category: "Ø£Ø®Ø±Ù‰" },
            { name: "Ø¨Ø§Ù…ÙŠØ© Ø®Ø¶Ø±Ø§Ø¡ Ø¨Ø§Ù„ØµÙ„ØµØ©", rawType: "OKT", category: "Ø£Ø®Ø±Ù‰" },
            { name: "Ù…Ø´Ø±ÙˆÙ… Ù‚Ø·Ø¹", rawType: "MSH", category: "Ø£Ø®Ø±Ù‰" }
        ];

        function populateCategoryFilter() {
            const categorySelect = document.getElementById("category-select");
            const categories = [...new Set(productDatabase.map(p => p.category))];
            categories.sort(); 
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.innerText = category;
                categorySelect.appendChild(option);
            });
        }

        function populateProductList() {
            const categorySelect = document.getElementById("category-select");
            const productNameSelect = document.getElementById("product-name-select");
            const selectedCategory = categorySelect.value;
            
            productNameSelect.innerHTML = '<option value="" data-rawtype="" disabled selected>-- Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØªØ¬ --</option>';
            
            let filteredProducts;
            if (selectedCategory === "all") {
                filteredProducts = productDatabase; 
            } else {
                filteredProducts = productDatabase.filter(p => p.category === selectedCategory); 
            }

            filteredProducts.forEach(product => {
                const option = document.createElement('option');
                option.value = product.name; 
                option.setAttribute('data-rawtype', product.rawType); 
                option.innerText = product.name;
                productNameSelect.appendChild(option);
            });
            updateRawType(); 
        }
        
        function updateRawType() {
            const productNameSelect = document.getElementById("product-name-select");
            const rawTypeInput = document.getElementById("raw-type-input");
            const selectedOption = productNameSelect.options[productNameSelect.selectedIndex];
            if (selectedOption) { 
                const rawType = selectedOption.getAttribute('data-rawtype');
                rawTypeInput.value = rawType ? rawType : "";
            } else {
                rawTypeInput.value = "";
            }
        }

        let currentBatchData = {};

        function generateBatch() {
            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
            const brandName = document.getElementById("brand-select").value;
            const rawTypeCode = document.getElementById("raw-type-input").value;
            const additionCode = document.getElementById("addition-select").value; 
            const weightSelect = document.getElementById("weight-select");
            const weightCode = weightSelect.value;
            let month = document.getElementById("month-input").value;
            let year = document.getElementById("year-input").value;
            const clientName = document.getElementById("client-name").value;
            const productName = document.getElementById("product-name-select").value;
            const notes = document.getElementById("notes-input").value;
            
            // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯
            if (!brandName) {
                alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø®ØªØ± Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯ Ø£ÙˆÙ„Ø§Ù‹ (Royal Hills, Aqua Premium, Agwad).");
                return;
            }

            if (!rawTypeCode || !weightCode || !month || !year) {
                alert("ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªÙƒÙ…Ø§Ù„ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ø§Ù„Ù…Ù†ØªØ¬ØŒ Ø§Ù„ÙˆØ²Ù†ØŒ Ø§Ù„Ø´Ù‡Ø±ØŒ Ø§Ù„Ø³Ù†Ø©).");
                return;
            }
            
            month = month.toString().padStart(2, '0');
            year = year.toString().padStart(2, '0');

            const finalBatchNumber = rawTypeCode + additionCode + weightCode + "/" + month + year;
            
            // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            currentBatchData = {
                brand: brandName,
                batch: finalBatchNumber,
                product: productName,
                client: clientName || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
                weight: weightSelect.options[weightSelect.selectedIndex].text,
                notes: notes
            };

            const resultDiv = document.getElementById("result-area");
            const batchNumberH2 = document.getElementById("batch-number");
            
            batchNumberH2.innerText = finalBatchNumber;
            resultDiv.style.display = "block";
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        function sendToWhatsapp() {
            if (!currentBatchData.batch) {
                alert("ÙŠØ±Ø¬Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„Ø© Ø£ÙˆÙ„Ø§Ù‹.");
                return;
            }

            // ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯
            let message = `*Ø¨ÙŠØ§Ù†Ø§Øª ØªØ´ØºÙŠÙ„Ø© Ø¥Ù†ØªØ§Ø¬ Ø¬Ø¯ÙŠØ¯Ø©* ğŸ­\n`;
            message += `---------------------------\n`;
            message += `*Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯:* ${currentBatchData.brand} âœ¨\n`;
            message += `*Ø§Ù„Ù…Ù†ØªØ¬:* ${currentBatchData.product}\n`;
            message += `*ÙƒÙˆØ¯ Ø§Ù„ØªØ´ØºÙŠÙ„Ø©:* ${currentBatchData.batch}\n`;
            message += `*Ø§Ù„ÙˆØ²Ù†:* ${currentBatchData.weight}\n`;
            message += `*Ø§Ù„Ø¹Ù…ÙŠÙ„:* ${currentBatchData.client}\n`;
            
            if (currentBatchData.notes) {
                message += `*Ù…Ù„Ø§Ø­Ø¸Ø§Øª:* ${currentBatchData.notes}\n`;
            }
            message += `---------------------------`;

            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/?text=${encodedMessage}`;
            window.open(whatsappUrl, '_blank');
        }

        window.onload = function() {
            populateCategoryFilter();
            populateProductList();
            document.getElementById("category-select").addEventListener('change', populateProductList);
            document.getElementById("product-name-select").addEventListener('change', updateRawType);
        };
    </script>

</body>

</html>
